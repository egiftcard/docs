---
slug: /embedded-wallet/auth
title: Authenticate a User
---

## Prompt login with a prebuilt modal (Recommended)

Open a prebuilt modal to prompt the user to sign in with email or social login.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();
await embeddedWallet.connect();
```

If the user is already logged in, this modal is skipped and the method returns.

This method throws an exception if the user closes the modal.

## Prompt email one-time passcode (OTP) modal (Advanced)

If the user's email is already known, email them a one-time passcode and prompt them to verify it.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

// regular flow with prestyled modal that directly prompts for email otp
const embeddedWallet = new EmbeddedWallet();
await embeddedWallet.connect({
  loginType: "ui_email_otp",
  email: "user@example.com",
});
```

If the user is already logged in, this modal is skipped and the method returns.

This method throws an exception if the user closes the modal.

## Prompt email one-time passcode (OTP) with your own UX (Advanced)

Headless method for email OTP login.

Use the built in method on the `EmbeddedWallet` class:

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();
// headless email otp login
await embeddedWallet.sendEmailOtp({
  email: "example@email.com",
});
```

## Headless login with email OTP (Advanced)

Headless method for email OTP login if the email and OTP are already known.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();

// make sure to call this after a user event - button click etc.
await embeddedWallet.connect({
  loginType: "headless_email_otp_verification",
  email: "<email-address>";
  otp: "<an-otp>";
});
```

### Recovery Code

If the user is an existing user, you can optionally enter a recovery code. This is a code that was generated when they first signed up. It is used to recover their account if they lose access to their device:

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();

// make sure to call this after a user event - button click etc.
await embeddedWallet.connect({
  loginType: "headless_email_otp_verification",
  email: "<email-address>";
  otp: "<an-otp>";
  // highlight-next-line
  recoveryCode: "<recovery-code>";
});
```

## Login with Google with your own UX (Advanced)

Headless method for login with Google.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();
// headless login with google
const googleWindow = window.open("", "Login", "width=350, height=500");
if (!googleWindow) {
  throw new Error("Failed to open google login window");
}

// make sure to call this after a user event - button click etc.
await embeddedWallet.connect({
  loginType: "headless_google_oauth",
  // the following are not strictly required but highly recommended
  // mainly to prevent browser from blocking pop-ups
  openedWindow: googleWindow,
  closeOpenedWindow: (openedWindow) => {
    openedWindow.close();
  },
});
```

## Bring your own auth with custom JWT (Advanced)

To log in to your own custom authentication, call `loginWithJwtAuth` with the user's auth JWT after they have authenticated.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();
await embeddedWallet.loginWithJwtAuth({
  token: "<token from your auth callback>",
  authProvider: AuthProvider.CUSTOM_JWT,
  recoveryCode: "Required if user is an existing user",
});
```

## Logout

When a user logs out, they will be prompted to authenticate again. They will not be prompted to provide a recovery password again on this device.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();

await embeddedWallet.logout();
```

## Get a user's auth and wallet information

Check if a user is logged in and if so, get their auth details, wallet address, and wallet.

```typescript
import { EmbeddedWallet } from "@thirdweb-dev/wallets";

const embeddedWallet = new EmbeddedWallet();

const auth = await embeddedWallet.getAuth();
const address = await embeddedWallet.getAddress();
```
