---
slug: /wallet-sdk/metamask
title: MetaMask
---

The MetaMaskWallet allows you to connect to the [MetaMask](https://metamask.io/) Wallet

## Create a wallet instance

```typescript
import { MetaMaskWallet } from "@thirdweb-dev/wallets";
import { Ethereum, Polygon } from "@thirdweb-dev/chains";

const metamaskWallet = new MetaMaskWallet({
  // (optional) This metadata is shown to the user when they connect to your DApp in the wallet
  dappMetadata: {
    name: "thirdweb powered dApp", // The name of your DApp
    url: "https://thirdweb.com", // The URL of your DApp
    description: "thirdweb powered dApp", // (optional)  A description of your DApp
    logoUrl: "https://thirdweb.com/favicon.ico", // (optional) logo of your DApp
  },

  // (optional) The chains your DApp supports
  // defaults to thirdweb's default supported chains
  chains: [Ethereum, Polygon],

  // (optional) If true, the wallet will open a QR Code modal if the MetaMask extension is not installed
  // (default = true)
  qrcode: false,
});
```

## Connect to the wallet

```typescript
try {
  const accountAddress = await metamaskWallet.connect();
  console.log("connected to account", accountAddress);
} catch (error) {
  console.log("Error connecting to wallet", error);
}
```

For Desktop users, if the MetaMask extension is installed, the User will be prompted to connect to the DApp.

For Mobile users, detect if the MetaMask is injected into the window object. If it is, call the `connect` method. else open your app in metamask by doing:

```typescript
window.open(`https://metamask.app.link/dapp/${window.location.toString()}`);
```

If the MetaMask extension is not installed, you can let the user connect their mobile wallet by asking the user to scan the QR code.

If you do not want to create your own QR code modal, you can set `qrcode: true` in the constructor and the user will be shown the [WalletConnect](https://walletconnect.com/) QR code modal.

If you want to create your own QR code modal, do not use the `connect` method, use the `connectWithQrCode` method instead and get the URI and render the QR code yourself using a QR code library.

## Connect to mobile wallet using QR code

If you want to create your own QR code modal, make sure to pass `qrcode: false` in the constructor and use the `connectWithQrCode` method instead of the `connect` method.

```typescript
const metamaskWallet = new MetaMaskWallet({
  // ...
  qrcode: false,
});

metamaskWallet.connectWithQrCode({
  onQrCodeUri: (uri) => {
    console.log("got uri", uri);
    // render the QR code for the uri
  },
  onConnected: () => {
    // user scanned and connected to the DApp
    console.log("connected");
  },
});
```

## Disconnect

Disconnect from the MetaMask wallet

```typescript
metamaskWallet.disconnect();
```

## Get Signer

Get the ethers [Signer](https://docs.ethers.org/v5/api/signer/) object for the connected account.

A Signer is an abstraction of an Ethereum Account, which can be used to sign messages and transactions and send signed transactions to the Ethereum Network to execute state changing operations.

```typescript
const signer = await metamaskWallet.getSigner();
```

## Get account address

Get the address of the connected account

```typescript
const accountAddress = await metamaskWallet.getAddress();
```

## Get the current connected network's chain id

Note that the user's wallet may be connected to a chain that is not supported by your DApp.

```typescript
const chainId = await metamaskWallet.getChainId();
```

## Switch Network

When you want the user to connect to a particular network, you can use the `switchChain` method to do so.

```typescript
// use the chains package
import { Mumbai } from "@thirdweb-dev/chains";
await metamaskWallet.switchChain(Mumbai.chainId);

// OR directly pass the chainId
await metamaskWallet.switchChain(80001);
```

## Sign Message

Sign a message using the connected account. Returns the signature.

Calling this method will prompt the user to sign the message in the MetaMask wallet.

```typescript
try {
  const signature = await metamaskWallet.signMessage("hello world");
  console.log("signature", signature);
} catch (error) {
  console.log("Error signing message", error);
}
```

## Verify the signature of a message

Return true if the signature is valid for the given message and account address, returns false otherwise. Throws an error if an invalid signature is passed.

```typescript
const isValid = await metamaskWallet.verifySignature(
  message,
  signature,
  accountAddress,
  chainId, // optional
);
```

## Listen for events

User can change their account or switch to a different network using wallets. You can listen to these events using the `addListener` method and update your UI accordingly.

```typescript
// listen for account change, network change
metamaskWallet.addListener("change", (info) => {
  console.log(info.address); // if account changed, address of new account else undefined
  console.log(info.chainId); // if switched to a different network, chainId of new network, else undefined
});

// listen for connect, disconnect
metamaskWallet.addListener("connect", (info) => {
  console.log("connected to account", info.address);
  console.log("connected to network", info.chainId);
});

metamaskWallet.addListener("disconnect", () => {
  console.log("disconnected");
});
```
