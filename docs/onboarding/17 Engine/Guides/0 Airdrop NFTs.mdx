---
slug: /guides/airdrop-nfts
title: Airdrop NFTs
---

import QuickstartCard from "@components/QuickstartCard";

See how Engine enables a brand to airdrop NFTs at scale to their superfans. (The developer only pays gas!)

:::info
This guide references Polygon Mumbai testnet and NextJS but is applicable for any EVM chain and full-stack framework.
:::

## Source Code

View the full source code on GitHub:

<div className="col col--12" style={{ padding: 8 }}>
  <QuickstartCard
    name="Source Code"
    link="https://github.com/thirdweb-example/engine-minting-api"
    image="/assets/github-icon.webp"
  />
</div>

## Prerequisites

- An Engine instance deployed to `ENGINE_URL`.
- A Client ID and Secret Key from the [API Keys page](https://thirdweb.com/dashboard/settings/api-keys).

## 1. Create a backend wallet

Create a backend wallet with Engine.

```bash
curl -X POST \
  -H "Authorization: Bearer THIRDWEB_SECRET_KEY" \
  "ENGINE_URL/backend-wallet/create"
```

_Replace `ENGINE_URL` and `THIRDWEB_SECRET_KEY`._

This endpoint returns a wallet address `BACKEND_WALLET_ADDRESS`.

## 2. Deploy an NFT contract

:::info
You will need gas (MATIC on Mumbai) for this step. Send 0.1 MATIC or [claim MATIC from a faucet](https://mumbaifaucet.com/) to your backend wallet address.

This is a freely available testnet currency. No real funds are required.
:::

Deploy a [thirdweb Edition contract](https://thirdweb.com/thirdweb.eth/TokenERC1155) with Engine. This contract is an ERC-1155 token that allows minting a token to multiple users.

```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer THIRDWEB_SECRET_KEY" \
  -H "x-backend-wallet-address: BACKEND_WALLET_ADDRESS" \
  -d '{
    "contractMetadata": {
      "name": "Acme Inc. Loyalty Card",
      "symbol": "ACME",
      "primary_sale_recipient": "BACKEND_WALLET_ADDRESS"
    }
  }' \
  "ENGINE_URL/deploy/mumbai/prebuilts/edition"
```

_Replace `ENGINE_URL`, `BACKEND_WALLET_ADDRESS`, and `THIRDWEB_SECRET_KEY`._

An NFT contract will be deployed to `NFT_CONTRACT_ADDRESS` after a brief moment.

## 2. Create a NextJS app

Clone a NextJS app template.

```bash
yarn create next-app
```

Install the thirdweb React (frontend) and Typescript (backend) SDKs.

```bash
yarn add @thirdweb-dev/react @thirdweb-dev/sdk ethers@^5
```

## 3. Frontend: Add Connect Wallet and Claim buttons

Key details:

- `<ThirdwebProvider>` wraps thirdweb components and React hooks.
- `<ConnectWallet>` prompts the user to connect a wallet.
- When connected, the **Claim** button is presented.
- The **Claim** buton calls `POST /api/claim`.

```tsx
import {
  ConnectWallet,
  ThirdwebProvider,
  useAddress,
} from "@thirdweb-dev/react";

export default function Home() {
  return (
    <ThirdwebProvider activeChain="mumbai" clientId={THIRDWEB_CLIENT_ID}>
      <ClaimPage />
    </ThirdwebProvider>
  );
}

function ClaimPage() {
  const userWalletAddress = useAddress();

  const onClick = async () => {
    const resp = await fetch("/api/claim", {
      method: "POST",
      body: JSON.stringify({ userWalletAddress }),
    });
    if (resp.ok) {
      alert(`üéâ A reward has been sent to your wallet: ${userWalletAddress}`);
    }
  };

  return (
    <main>
      <h2>Thank you for being a superfan! ‚ù§Ô∏è</h2>
      <ConnectWallet />
      {userWalletAddress && <button onClick={onClick}>Claim my reward</button>}
    </main>
  );
}
```

_Replace `THIRDWEB_CLIENT_ID`_.

## 2b. Backend: Call Engine to mint an NFT

Key details:

- `POST /api/claim` calls Engine to mint an NFT to the user's wallet.

```tsx
import { NextResponse } from "next/server";

const {
  BACKEND_WALLET_ADDRESS,
  NFT_CONTRACT_ADDRESS,
  ENGINE_URL,
  THIRDWEB_SECRET_KEY,
} = process.env;

export async function POST(request: Request) {
  const { userWalletAddress } = await request.json();

  await fetch(
    `${ENGINE_URL}/contract/mumbai/${NFT_CONTRACT_ADDRESS}/erc1155/mint-to`,
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${THIRDWEB_SECRET_KEY}`,
        "x-backend-wallet-address": BACKEND_WALLET_ADDRESS,
      },
      body: JSON.stringify({
        receiver: userWalletAddress,
        metadataWithSupply: {
          metadata: {
            name: "Acme Inc. Superfan",
            description: "Created with thirdweb Engine",
            image:
              "ipfs://QmciR3WLJsf2BgzTSjbG5zCxsrEQ8PqsHK7JWGWsDSNo46/nft.png",
          },
          supply: "1",
        },
      }),
    },
  );

  return NextResponse.json({ message: "Success!" });
}
```

## 3. Update `.env.local` and start the server

Update `.env.local` with relevant details from previous steps.

```bash
ENGINE_URL=https://...
THIRDWEB_CLIENT_ID=0123...
THIRDWEB_SECRET_KEY=AaBb...
BACKEND_WALLET_ADDRESS=0x...
NFT_CONTRACT_ADDRESS=0x...
```

Start the server.

```bash
yarn dev
```

The server is hosted on `http://localhost:3000`.

## Try it out!

Here‚Äôs what the user flow looks like.

The app prompts the user to connect their wallet.
![Initial page load](../assets/airdrop-nfts-1.png)
![The app prompts the user to connect their wallet.](../assets/airdrop-nfts-2.png)

A user presses claim.
![A user presses claim.](../assets/airdrop-nfts-3.png)

They'll receive the NFT in their wallet shortly!
![They'll receive the NFT in their wallet shortly!](../assets/airdrop-nfts-4.png)
