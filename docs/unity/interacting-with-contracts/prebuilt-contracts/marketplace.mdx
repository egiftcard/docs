---
title: Marketplace
slug: /marketplace
toc_max_heading_level: 2 # Show up to h2 in table of contents (default is up to h3)
---

When using the [Marketplace](https://thirdweb.com/thirdweb.eth/Marketplace) smart contract, additional top-level functionality is available to use.

To access the top-level functionality, provide the `marketplace` contract type when creating the contract instance:

```csharp
Contract contract = sdk.GetContract("0x...");
Marketplace marketplace = contract.marketplace;
```

## Auction - cancelListing

Cancel a listing that you made.

Note: Auction listings cannot be canceled if a bid has been made.

```csharp
var data = await marketplace.auction.CancelListing("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to cancel.

Must be a `string`.

</div>
</details>

## Auction - createListing

List an NFT for sale in an auction listing on the marketplace.

```csharp
var data = await marketplace.auction.CreateListing(new NewAuctionListing() {
    assetContractAddress = "{{contract_address}}",
    tokenId = "0",
    startTimestamp = DateTime.Now.Ticks,
    buyoutPricePerToken = "{{price}}",
    listingDurationInSeconds = 86400,
    quantity = 1,
});
```

<details>
    <summary>Configuration</summary>
    <div>

#### assetContractAddress

The address of the NFT smart contract that you are listing.

Must be a `string`.

#### tokenId

The token ID of the NFT to list for sale.

Must be a `string`.

#### startTimestamp

The date and time that the listing should start.

Must be a `long`.

#### listingDurationInSeconds

How long the auction is open for, in seconds.

Must be an `int`.

#### quantity

The quantity of the NFT to list for sale.

Only relevant for ERC1155 NFTs. For ERC721 NFTs, this value should be `1`.

Must be an `int`.

#### currencyContractAddress

The address of the currency contract that will be used to pay for the listing.

Must be a `string`.

#### buyoutPricePerToken

The price that users must pay to **purhcase** the NFT from the auction, immediately closing the auction and executing a sale event for both buyer and seller.

Must be a `string`.

#### reservePricePerToken

The minimum bid that will be accepted for the NFT.

Bids below this amount cannot be placed on the auction.

Must be a `string`.

</div>
</details>

## Auction - executeSale

Close the auction for both **buyer** and **seller**.

This means that the NFT is transferred to the buyer, and the seller is paid the amount of the winning bid.

```csharp
var data = await marketplace.auction.ExecuteSale("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to execute the sale for.

Must be a `string`.

</div>
</details>

## Auction - getListing

Get the details of a listing using the listing ID.

```csharp
var data = await marketplace.auction.GetListing("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get the details for.

Must be a `string`.

### Return Value

Returns an `AuctionListing` struct, containing the following properties:

```csharp
{
    string startTimeInEpochSeconds;
    string endTimeInEpochSeconds;
    string reservePrice;
    CurrencyValue reservePriceCurrencyValuePerToken;
    string id;
    string sellerAddress;
    string assetContractAddress;
    string tokenId;
    NFTMetadata asset;
    int quantity;
    string currencyContractAddress;
    string buyoutPrice;
    CurrencyValue buyoutCurrencyValuePerToken;
    int type;
}
```

</div>
</details>

## Auction - getMinimumNextBid

Get the value that the next bid must be in order to be accepted.

- If there is no current bid, this value is the reserve price.
- If there is a current bid, this value is the current bid plus the bid buffer.

```csharp
var data = await marketplace.auction.GetMinimumNextBid("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get the minimum next bid for.

Must be a `string`.

### Return Value

The minimum next bid for the listing.

```csharp
{
    string name;
    string symbol;
    string decimals;
    string value;
    string displayValue;
}
```

</div>
</details>

## Auction - getWinner

Get the address that won an auction _after_ an auction has ended.

```csharp
var data = await marketplace.auction.GetWinner("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get the winner for.

Must be a `string`.

### Return Value

The wallet address of the winner.

```csharp
string
```

</div>
</details>

## Auction - getWinningBid

Get the current highest bid of an active auction.

```csharp
var data = await marketplace.auction.GetWinningBid("{{listing_id}}");
```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get the winning bid for.

Must be a `string`.

### Return Value

The current highest bid of the auction.

```typescript
{
    string listingId;
    string buyerAddress;
    int quantityDesired;
    string pricePerToken;
    CurrencyValue currencyValue;
    string currencyContractAddress;
}
```

</div>
</details>

## Direct - acceptOffer

Accept an offer placed on your direct listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to accept an offer for.

Must be a `string`, `number`, or `BigNumber`.

#### offerorAddress

The wallet address of the offeror.

Must be a `string`.

</div>
</details>

## Direct - buyoutListing

Buy the NFT(s) for sale on a direct listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to buyout.

Must be a `string`, `number`, or `BigNumber`.

#### quantity

The quantity of NFTs to buy from the listing.

Only applicable for ERC1155 NFTs. For ERC721 NFTs, this should be `1`.

Must be a `string`, `number`, or `BigNumber`.

#### receiver (optional)

Optionally, buy the NFTs for a different wallet address other than the connected wallet.

Must be a `string`.

</div>
</details>

## Direct - cancelListing

Cancel a direct listing you created.

Direct listings can be canceled at any time, unless a buyout has already been made.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to cancel.

Must be a `string`, `number`, or `BigNumber`.

</div>
</details>

## Direct - createListing

List an NFT for sale on the marketplace for direct purchase.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### assetContractAddress

The address of the NFT smart contract the asset you want to list is on.

Must be a `string`.

#### tokenId

The token ID of the NFT you want to list.

Must be a `string`, `number`, or `BigNumber`.

#### startTimestamp

The date and time when the listing should open up for offers.

Must be a `Date` object.

#### listingDurationInSeconds

How long the listing is open for, in seconds.

Must be a `string`, `number`, or `BigNumber`.

#### quantity

The quantity of NFTs to list.

Only applicable for ERC1155 NFTs. For ERC721 NFTs, this should be `1`.

Must be a `string`, `number`, or `BigNumber`.

#### currencyContractAddress

The address of the currency contract that will be used to pay for the listing.

To use the native token, use the `NATIVE_TOKEN_ADDRESS` constant.

Must be a `string`.

#### buyoutPricePerToken

The price that users can buy the NFT for.

Must be a `string`, `number`, or `BigNumber`.

</div>
</details>

## Direct - getActiveOffer

Get an active offer on a listing from a specific wallet address, if there is one.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get the active offer for.

Must be a `string`, `number`, or `BigNumber`.

#### offerorAddress

The wallet address of the offeror.

Must be a `string`.

### Return Value

If there is no active offer made by hte `offerorAddress`, returns `undefined`.

Otherwise, returns an `Offer` object with the following properties:

```typescript
{
  /**
   * The id of the listing.
   */
  listingId: BigNumberish;
  /**
   * The address of the buyer who made the offer.
   */
  buyerAddress: string;
  /**
   * The quantity of tokens to be bought.
   */
  quantityDesired: BigNumberish;
  /**
   * The amount of coins offered per token.
   */
  pricePerToken: BigNumber;
  /**
   * The `CurrencyValue` of the listing. Useful for displaying the price information.
   */
  currencyValue: CurrencyValue;
  /**
   * The currency contract address of the offer token.
   */
  currencyContractAddress: string;
}
```

</div>
</details>

## Direct - getListing

Get a direct listing by its ID.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get.

Must be a `string`, `number`, or `BigNumber`.

### Return Value

Returns a `DirectListing` object containing the following properties:

```typescript
{
  /**
   * The id of the listing.
   */
  id: string;
  /**
   * The address of the asset being listed.
   */
  assetContractAddress: string;
  /**
   * The ID of the token to list.
   */
  tokenId: BigNumberish;
  /**
   * The asset being listed.
   */
  asset: NFTMetadata;
  /**
   * The start time of the listing.
   */
  startTimeInSeconds: BigNumberish;
  /**
   * Number of seconds until the listing expires.
   */
  secondsUntilEnd: BigNumberish;
  /**
   * The quantity of tokens to include in the listing.
   *
   * For ERC721s, this value should always be 1 (and will be forced internally regardless of what is passed here).
   */
  quantity: BigNumberish;
  /**
   * The address of the currency to accept for the listing.
   */
  currencyContractAddress: string;
  /**
   * The `CurrencyValue` of the listing. Useful for displaying the price information.
   */
  buyoutCurrencyValuePerToken: CurrencyValue;
  /**
   * The buyout price of the listing.
   */
  buyoutPrice: BigNumber;
  /**
   * The address of the seller.
   */
  sellerAddress: string;
  type: ListingType.Direct;
}
```

</div>
</details>

## Direct - isStillValidListing

Check if a direct listing is still valid, meaning:

The asset holder has not transferred the asset to another wallet
The asset holder has not burned the asset
The asset holder has not removed the approval on the marketplace

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to check.

Must be a `string`, `number`, or `BigNumber`.

### Return Value

```csharp

```

</div>
</details>

## Direct - makeOffer

Make an offer to buy an NFT for a certain price on a direct listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to make an offer for.

Must be a `string`, `number`, or `BigNumber`.

#### quantity

The quantity of NFTs to buy.

Only applicable for ERC1155 NFTs. For ERC721 NFTs, this should be `1`.

Must be a `string`, `number`, or `BigNumber`.

#### currencyContractAddress

The address of the currency contract that will be used to pay for the listing.

To use the native token, use the `NATIVE_TOKEN_ADDRESS` constant.

Must be a `string`.

#### pricePerToken

The price to offer to buy the NFT for.

Must be a `string`, `number`, or `BigNumber`.

#### expiresAt (optional)

The time at which the offer expires.

If not provided, the offer will never expire (uses max possible timestamp `MaxUint256`).

Must be a `Date` object.

</div>
</details>

## Direct - updateListing

Update a direct listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

Provide the `id` of the listing you want to update, and the new information about the listing.

See [`createListing`](#direct---createlisting) for more information about the properties.

</div>
</details>

## getActiveListings

Get all active listings on the marketplace, both direct and auction listings.

An active listing means it can be bought or bid on.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### filter (optional)

A filter to apply to the listings returned.

```csharp

```

### Return Value

Returns an array containing both `DirectListing` objects and `AuctionListing` objects.

```csharp

```

</div>
</details>

## getAllListings

Get all the listings on the marketplace, including inactive ones.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### filter (optional)

A filter to apply to the listings returned.

```csharp

```

### Return Value

Returns an array containing both `DirectListing` objects and `AuctionListing` objects.

```csharp

```

</div>
</details>

## getBidBufferBps

Get the current bid buffer basis points of the marketplace.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

### Return Value

Returns in percentage format, i.e. `100` = `1%`.

```csharp

```

</div>
</details>

## getListing

Get a listing by its ID, regardless of whether it is a direct or auction listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get.

Must be a `string`, `number`, or `BigNumber`.

### Return Value

Returns a `DirectListing` or `AuctionListing` object.

```csharp

```

</div>
</details>

## getOffers

Get all the offers made on a listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to get offers for.

Must be a `string`, `number`, or `BigNumber`.

### Return Value

Returns an array of `Offer` objects.

```typescript
{
  /**
   * The id of the listing.
   */
  listingId: BigNumberish;
  /**
   * The address of the buyer who made the offer.
   */
  buyerAddress: string;
  /**
   * The quantity of tokens to be bought.
   */
  quantityDesired: BigNumberish;
  /**
   * The amount of coins offered per token.
   */
  pricePerToken: BigNumber;
  /**
   * The `CurrencyValue` of the listing. Useful for displaying the price information.
   */
  currencyValue: CurrencyValue;
  /**
   * The currency contract address of the offer token.
   */
  currencyContractAddress: string;
}
[];
```

</div>
</details>

## getTimeBufferInSeconds

Get the current time buffer in seconds of the marketplace.

The time buffer is the amount of seconds that are added to the close time of the auction listing when a new bid is made.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

### Return Value

Returns in seconds.

```csharp

```

</div>
</details>

## getTotalCount

Get the total number of listings on the marketplace.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

### Return Value

Returns the total number of listings on the marketplace.

```csharp

```

</div>
</details>

## isRestrictedToListerRoleOnly

A marketplace can be restricted to only allow wallet addresses with the `LISTER` role to create listings.

This method returns `true` or `false` depending on whether this configuration is set.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

### Return Value

Returns `true` or `false`.

```csharp

```

</div>
</details>

## makeOffer

Create a new bid on an auction listing or a new offer on a direct listing.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### listingId

The ID of the listing to make an offer/bid on.

Must be a `string`, `number`, or `BigNumber`.

#### pricePerToken

The price per token to offer/bid.

Must be a `string`, `number`, or `BigNumber`.

#### quantity

The quantity of tokens to offer/bid on.

Must be a `string`, `number`, or `BigNumber`.

</div>
</details>

## setBidBufferBps

Set the bid buffer basis points of the marketplace.

The bid buffer is the amount of percentage that is added to the current highest bid when a new bid is made.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### bidBufferBps

The bid buffer basis points to set.

Must be a `string`, `number`, or `BigNumber`.

</div>
</details>

## setTimeBufferInSeconds

Set the time buffer in seconds of the marketplace.

The time buffer is the amount of seconds that are added to the close time of the auction listing when a new bid is made.

```csharp

```

<details>
    <summary>Configuration</summary>
    <div>

#### timeBufferSeconds

The time buffer in seconds to set.

Must be a `string`, `number`, or `BigNumber`.

</div>
</details>
